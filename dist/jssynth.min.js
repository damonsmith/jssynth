System.register("lib/src/webaudiodriver.js",["npm:babel-runtime@5.2.17/helpers/class-call-check"],function(a){var b,c,d,e;return{setters:[function(a){b=a["default"]}],execute:function(){"use strict";"format es6";c=2048,d=2,e=function f(a,e){b(this,f);var g=this;if(window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=window.webkitAudioContext),!window.hasOwnProperty("AudioContext"))throw new Error("Unable to use WebAudioDriver in this browser.");this.context=new AudioContext,this.node=this.context.createScriptProcessor(e||c,0,d),this.nextSamples=null,this.nextSamplesOffset=0;var h=function(b){for(var c=b.outputBuffer,e=c.sampleRate,f=c.length,h=[c.getChannelData(0),c.getChannelData(1)],i=null,j=0;f>j;){g.nextSamples||(g.nextSamples=a.mix(e),g.nextSamplesOffset=0);for(var k=0;d>k;k++)for(i=0;g.nextSamplesOffset+i<g.nextSamples.bufferSize&&f>i+j;i++)h[k][j+i]=g.nextSamples.output[k][g.nextSamplesOffset+i];j+=i,g.nextSamplesOffset+=i,g.nextSamplesOffset>=g.nextSamples.bufferSize&&(g.nextSamples=null)}};this.start=function(){this.node.connect(g.context.destination),this.node.onaudioprocess=h},this.stop=function(){this.node.disconnect(),this.node.onaudioprocess=void 0}},a("WebAudioDriver",e)}}}),System.register("lib/src/instrument.js",["npm:babel-runtime@5.2.17/helpers/class-call-check","lib/src/utils.js"],function(a){var b,c,d,e;return{setters:[function(a){b=a["default"]},function(a){c=a.Utils}],execute:function(){"use strict";d={numSamples:1,name:"Default Instrument",noteToSampleMap:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],volumeType:0,volumeEnvelope:[],numVolumePoints:0,volumeSustainPoint:0,volumeLoopStartPoint:0,volumeLoopEndPoint:0,panningType:0,panningEnvelope:[],numPanningPoints:0,panningSustainPoint:0,panningLoopStartPoint:0,panningLoopEndPoint:0,vibratoType:0,vibratoSweep:0,vibratoDepth:0,vibratoRate:0,volumeFadeout:0},e=function f(a,e){b(this,f),this.metadata=c.merge(d,a),this.samples=e},a("Instrument",e)}}}),System.register("lib/src/sample.js",["npm:babel-runtime@5.2.17/helpers/create-class","npm:babel-runtime@5.2.17/helpers/class-call-check","lib/src/utils.js"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a["default"]},function(a){c=a["default"]},function(a){d=a.Utils}],execute:function(){"use strict";e={name:"",bits:8,channels:1,littleEndian:!0,deltaEncoding:!1,signed:!0,sampleRate:8e3,representedFreq:440,pitchOfs:1,repeatType:"NON_REPEATING",volume:64,repeatStart:0,repeatEnd:0,sampleLength:0},f=function(){function a(b,f,g){if(c(this,a),this.metadata=d.merge(e,f),"function"==typeof b?this.data=b():this.data=a.convertSamplesBytesToDoubles(b,f,g),"NON_REPEATING"!==this.metadata.repeatType)for(var h=0;h<this.data.length;h++)this.data[h][f.repeatEnd+1]=this.data[h][f.repeatEnd]}return b(a,null,[{key:"convertSamplesBytesToDoubles",value:function(a,b,c){var d,e=c||0,f=[],g=[];for(d=0;d<b.channels;d++)f[d]=[],g[d]=[];if(b.bits%8!==0||b.bits>24)throw new Error("can only read 8, 16 or 24-bit samples");for(var h=b.bits/8,i=h*b.channels,j=b.sampleLength,k=0;j>k;k++){var l=i*k;for(d=0;d<b.channels;d++){for(var m=l+d*h,n=m+(b.littleEndian?h-1:0),o=m+(b.littleEndian?-1:h),p=b.littleEndian?-1:1,q=0,r=.5,s=255,t=n;t!==o;t+=p)q=256*q+a.charCodeAt(e+t),r=256*r,s=256*s+255;if(b.signed&&(q=(q^r)&s),b.deltaEncoding){var u=0==k?0:g[d][k-1];g[d][k]=u+((q^r)&s)&255,f[d][k]=(((g[d][k]^r)&s)-r)/r}else q=(q-r)/r,f[d][k]=q}}return f}}]),a}(),a("Sample",f)}}}),System.register("lib/src/utils.js",["npm:babel-runtime@5.2.17/helpers/create-class","npm:babel-runtime@5.2.17/helpers/class-call-check"],function(a){var b,c,d;return{setters:[function(a){b=a["default"]},function(a){c=a["default"]}],execute:function(){"use strict";"format es6";d=function(){function a(){c(this,a)}return b(a,null,[{key:"clone",value:function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}},{key:"merge",value:function(b,c){var d=a.clone(b);if(void 0!==c&&null!==c)for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);return d}},{key:"makeArrayOf",value:function(a,b){for(var c=[],d=b;d--;)c[d]=a;return c}}]),a}(),a("Utils",d)}}}),System.registerDynamic("npm:core-js@0.9.7/library/modules/$.fw",[],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports=function(a){return a.FW=!1,a.path=a.core,a},d.define=e,c.exports}),System.registerDynamic("npm:core-js@0.9.7/library/modules/$",["npm:core-js@0.9.7/library/modules/$.fw"],!0,function(a,b,c){"use strict";function d(a){return isNaN(a=+a)?0:(a>0?q:p)(a)}function e(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}function f(a,b,c){return a[b]=c,a}function g(a){return t?function(b,c,d){return v.setDesc(b,c,e(a,d))}:f}function h(a){return null!==a&&("object"==typeof a||"function"==typeof a)}function i(a){return"function"==typeof a}function j(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}var k=this,l=k.define;k.define=void 0;var k="undefined"!=typeof self?self:Function("return this")(),m={},n=Object.defineProperty,o={}.hasOwnProperty,p=Math.ceil,q=Math.floor,r=Math.max,s=Math.min,t=!!function(){try{return 2==n({},"a",{get:function(){return 2}}).a}catch(a){}}(),u=g(1),v=c.exports=a("npm:core-js@0.9.7/library/modules/$.fw")({g:k,core:m,html:k.document&&document.documentElement,isObject:h,isFunction:i,it:function(a){return a},that:function(){return this},toInteger:d,toLength:function(a){return a>0?s(d(a),9007199254740991):0},toIndex:function(a,b){return a=d(a),0>a?r(a+b,0):s(a,b)},has:function(a,b){return o.call(a,b)},create:Object.create,getProto:Object.getPrototypeOf,DESC:t,desc:e,getDesc:Object.getOwnPropertyDescriptor,setDesc:n,setDescs:Object.defineProperties,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:j,ES5Object:Object,toObject:function(a){return v.ES5Object(j(a))},hide:u,def:g(0),set:k.Symbol?f:u,mix:function(a,b){for(var c in b)u(a,c,b[c]);return a},each:[].forEach});return"undefined"!=typeof __e&&(__e=m),"undefined"!=typeof __g&&(__g=k),k.define=l,c.exports}),System.registerDynamic("npm:core-js@0.9.7/library/fn/object/define-property",["npm:core-js@0.9.7/library/modules/$"],!0,function(a,b,c){var d=this,e=d.define;d.define=void 0;var f=a("npm:core-js@0.9.7/library/modules/$");return c.exports=function(a,b,c){return f.setDesc(a,b,c)},d.define=e,c.exports}),System.registerDynamic("npm:babel-runtime@5.2.17/core-js/object/define-property",["npm:core-js@0.9.7/library/fn/object/define-property"],!0,function(a,b,c){var d=this,e=d.define;return d.define=void 0,c.exports={"default":a("npm:core-js@0.9.7/library/fn/object/define-property"),__esModule:!0},d.define=e,c.exports}),System.registerDynamic("npm:babel-runtime@5.2.17/helpers/create-class",["npm:babel-runtime@5.2.17/core-js/object/define-property"],!0,function(a,b,c){"use strict";var d=this,e=d.define;d.define=void 0;var f=a("npm:babel-runtime@5.2.17/core-js/object/define-property")["default"];return b["default"]=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),f(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b.__esModule=!0,d.define=e,c.exports}),System.registerDynamic("npm:babel-runtime@5.2.17/helpers/class-call-check",[],!0,function(a,b,c){"use strict";var d=this,e=d.define;return d.define=void 0,b["default"]=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},b.__esModule=!0,d.define=e,c.exports}),System.register("lib/src/mixer.js",["npm:babel-runtime@5.2.17/helpers/class-call-check","npm:babel-runtime@5.2.17/helpers/create-class","lib/src/utils.js"],function(a){var b,c,d,e,f,g,h,i;return{setters:[function(a){b=a["default"]},function(a){c=a["default"]},function(a){d=a.Utils}],execute:function(){"use strict";"format es6";e={numChannels:8,volume:64,secondsPerMix:.1,filters:null},f={panPos:0,playbackFreqHz:0,sample:void 0,samplePosition:-1,volume:64,enabled:!0},g={REP_NORMAL:function(a,b,c,d){var e=a;for(e+=b;e>=c;)e-=d;return e},NON_REPEATING:function(a,b){return a+b}},h=function j(a,c){b(this,j),this.bufferSize=a,this.output=c},i=function(){function a(c,g){b(this,a),this.globalState=d.merge(e,c),this.preMixCallback=null,this.preMixObject=null,this.postMixCallback=null,this.postMixObject=null,this.channelState=[];for(var h=d.merge(f,g),i=0;i<this.globalState.numChannels;i++)this.channelState[i]=d.clone(h)}return c(a,[{key:"setPreMixCallback",value:function(a,b){this.preMixCallback=a,this.preMixObject=b}},{key:"setPostMixCallback",value:function(a,b){this.postMixCallback=a,this.postMixObject=b}},{key:"setGlobalVolume",value:function(a){this.globalState.volume=a}},{key:"setSecondsPerMix",value:function(a){this.globalState.secondsPerMix=a}},{key:"triggerSample",value:function(a,b,c){this.channelState[a].sample=b,this.channelState[a].playbackFreqHz=c,this.channelState[a].samplePosition=0,this.channelState[a].volume=b.metadata.volume}},{key:"enableChannels",value:function(a){for(var b=0;b<a.length;b++)this.channelState[a[b]].enabled=!0}},{key:"disableChannels",value:function(a){for(var b=0;b<a.length;b++)this.channelState[a[b]].enabled=!1}},{key:"setSample",value:function(a,b){this.channelState[a].sample=b}},{key:"setSamplePosition",value:function(a,b){var c=this.channelState[a].sample;if(c){var d=c.metadata.sampleLength;if("NON_REPEATING"!==c.metadata.repeatType)for(var e=c.metadata.repeatStart,f=c.metadata.repeatEnd,g=f-e;b>d;)b-=g;d>b?this.channelState[a].samplePosition=b:this.channelState[a].samplePosition=-1}}},{key:"addToSamplePosition",value:function(a,b){var c=this.channelState[a].sample;c&&this.channelState[a].samplePosition>=0&&this.setSamplePosition(a,this.channelState[a].samplePosition+b)}},{key:"setFrequency",value:function(a,b){this.channelState[a].playbackFreqHz=b}},{key:"setVolume",value:function(a,b){this.channelState[a].volume=b}},{key:"setPanPosition",value:function(a,b){this.channelState[a].panPos=b}},{key:"cut",value:function(a){this.channelState[a].samplePosition=-1,this.channelState[a].sample=void 0}},{key:"setFilters",value:function(a){a?this.globalState.filters=a:this.globalState.filters=null}},{key:"calculatePanMatrix",value:function(a){if(a>=-1&&1>=a){var a=(a+1)/2;return{ll:1-a,lr:0,rl:0,rr:a}}return{ll:1,rr:-1}}},{key:"mix",value:function(a){var b=this;this.preMixCallback&&this.preMixCallback.call(this.preMixObject,this,a);var c=0,e=0,f=[],i=Math.floor(a*this.globalState.secondsPerMix);f[0]=d.makeArrayOf(0,i),f[1]=d.makeArrayOf(0,i);var j=this.globalState.numChannels,k=this.globalState.volume;for(e=0;j>e;e++){var l=this.channelState[e];if(!l.enabled)break;var m=this.calculatePanMatrix(l.panPos),n=l.sample,o=l.volume,p=l.samplePosition,q=l.playbackFreqHz/a,r=1/(j/2)*(k/64)*(o/64),s=r*m.ll,t=r*m.rr;if(n&&n.data&&p>=0&&q>0){var u=n.metadata.representedFreq,v=n.metadata.sampleRate;q*=v/u;var w=n.data[0],x=n.data[1]||n.data[0],y=n.metadata.sampleLength,z=n.metadata.repeatStart,A=n.metadata.repeatEnd,B=A-z,C=g[n.metadata.repeatType];for(c=0;i>c&&y>p;c++)f[0][c]+=w[Math.floor(p)]*s,f[1][c]+=x[Math.floor(p)]*t,p=C(p,q,A,B)}l.samplePosition=p}if(this.globalState.filters){var D=this.globalState.filters;for(c=0;i>c;c++)f[0][c]=D[0].next(f[0][c]),f[1][c]=D[1].next(f[1][c])}var E=new h(i,f);return this.postMixCallback&&window.setTimeout(function(){b.postMixCallback.call(b.postMixObject,E)},0),E}}]),a}(),a("Mixer",i)}}}),System.register("lib/jssynth.js",["lib/src/mixer.js","lib/src/sample.js","lib/src/instrument.js","lib/src/webaudiodriver.js"],function(a){var b,c,d,e;return{setters:[function(a){b=a.Mixer},function(a){c=a.Sample},function(a){d=a.Instrument},function(a){e=a.WebAudioDriver}],execute:function(){"use strict";a("Mixer",b),a("Sample",c),a("Instrument",d),a("WebAudioDriver",e)}}});
//# sourceMappingURL=jssynth.min.js.map