<html>
<head>
    <link href="css/app.css" rel="stylesheet">
    <title>Jsynth Demo</title>
    <script src="../../js/jssynth_core.js" type="text/javascript"></script>
</head>
<body>
<!-- simple demo to illustrate playback of synthetic samples - in this case to generate a dial-tone noise -->
<script>
    mixer = new jssynth_core.Mixer({ numChannels: 8, volume: 64} /* global params */, { volume: 64 } /* default channel params */);

    var createToneSample = function(sampleRate, freqHz, seconds) {
        var numSamples = Math.floor(seconds * sampleRate);
        return new jssynth_core.Sample(function() {
            var results = [];
            results[0] = [];
            for (var i = 0; i < numSamples; i++) {
                results[0][i] = Math.sin( (2 * Math.PI * freqHz/ sampleRate)  * i);
            }
            return results;
        }, { sampleLength: numSamples, sampleRate: sampleRate, representedFreq: freqHz, channels: 1 });
    }

    var sample440 = createToneSample(44100, 440, 2);
    var sample350 = createToneSample(44100, 350, 2);

    audioOut = new jssynth_core.WebAudioOutput(mixer);

    var playDialTone = function() {
        mixer.triggerSample(0, sample440, 440);
        mixer.triggerSample(1, sample350, 350);
    }

    var stopDialTone = function() {
        mixer.cut(0);
        mixer.cut(1);
    }
</script>
<button type="button" onclick="audioOut.start();">Start JSSynth</button>
<button type="button" onclick="audioOut.stop();">Stop JSSynth</button>
<button type="button" onclick="playDialTone();">Trigger Dial-Tone Samples</button>
<button type="button" onclick="stopDialTone();">Cut Sample</button>
</body>
</html>
